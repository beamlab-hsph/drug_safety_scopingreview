pharmacoepidemiology and drug safety 2009; 18: 154–158
Published online 29 December 2008 in Wiley InterScience (www.interscience.wiley.com) DOI: 10.1002/pds.1695

ORIGINAL REPORT

A computerized system for signal detection in spontaneous reporting
system of Shanghai China
Xiaofei Ye MMed1y, Zheng Fu MMed1y, Hainan Wang PHD1,2y, Wenmin Du PhD3, Rui Wang MMed1,
Yalin Sun MMed1, Qingbin Gao PHD1 and Jia He MD, PHD1*
1

Department of Health Statistics, Second Military Medical University, Shanghai, China
Center for Drug Evaluation, State Food and Drug Administration, Beijing, China
3
Adverse Drug Reaction Monitoring Center of Shanghai, Shanghai, China
2

SUMMARY
Purpose We developed a computerized system for signal detection in spontaneous reporting system (SRS) of Shanghai. Data acquisition,
data mining could be carried out automatically and the process of data preprocessing and cleaning could be facilitated. This system was
expected to detect signals from SRS after drug licensing with minimum patient exposure.
Methods This system was developed by Microsoft visual basic (VB) 6.0. Data preprocessing, data cleaning, and data mining were based
upon visual basic for application (VBA) in Microsoft Excel 2003. Database of drug generic name and adverse drug reaction (ADR) standard
dictionary were set up initially for data cleaning and coding. Algorithms including reporting odds ratio (ROR), proportional reporting ratio
(PRR), measure used by the Medicines and Healthcare Products Regulatory Agency (MHRA), Bayesian confidence propagation neural
network (BCPNN) were employed in this system. Crude ADR reports submitted to Shanghai ADR SRS from December 2003 to April 2007
were used as a material in this study to test the feasibility and flexibility of this system.
Results Thirty two thousand seven hundred and fourty six crude ADR reports were acquired from the SRS automatically. Two thousand one
hundred and fourty seven drug generic name and 621 ADR name were kept in the database after data preprocessing and cleaning. A total of
1430, 1419, 868 and 997 possible drug-ADR signals were generated by ROR, PRR, BCPNN and MHRA, respectively.
Conclusions The results indicate that this computerized system is a flexible one that can help to detect possible drug-ADR signals
intelligently in SRS of Shanghai now. It is a promising system for post-marketing surveillance on both chemical medicine and Chinese
traditional medicine. Copyright # 2008 John Wiley & Sons, Ltd.
key words — adverse drug reaction; signal detection; data mining; spontaneous reporting system
Received 14 July 2008; Revised 3 November 2008; Accepted 15 November 2008

INTRODUCTION
Adverse drug reaction (ADR) constitutes a major
public health problem. It was estimated that up to 5%
of hospital admission, 28% of all emergency department visits and 5% of hospital deaths were due to
ADR.1 According to the WHO, the drug safety signal is
defined as ‘reported information on a possible causal
relationship between an adverse event and a drug, the
relationship being unknown or incompletely docu* Correspondence to: Professor J. He, Department of Health Statistics,
Second Military Medical University, Shanghai 200433, China.
E-mail: hejia63@yahoo.com
y
Contributed equally.

Copyright # 2008 John Wiley & Sons, Ltd.

mented previously. Usually more than a single report is
required to detect a signal, depending on the
seriousness of the event and the quality of the
information.’2 It is a challenging task to do postmarketing surveillance to detect signals as soon as
possible after licensing with minimum patient
exposure.3
Surveillance schemes based on spontaneous reporting system (SRS) are a cornerstone for the early
detection of drug hazards that are novel by virtue of
their clinical nature, severity and/or frequency.4 SRS is
employed by health authorities, pharmaceutical companies and drug monitoring centers for signal detection, such as the international pharmacovigilance

COMPUTERIZED SYSTEM FOR SIGNAL DETECTION

155

programme of the World Health Organization (the
WHO Uppsala Monitoring Center), Adverse Event
Reporting System (AERS) of the US FDA, the Yellow
Card Scheme of the Medicine and Healthcare Products
Regulatory Agency (MHRA), etc. Intensive hospital
monitoring (IHM), prescription-event monitoring
(PEM) are other monitoring methods for drug safety.
Shanghai ADR SRS was set up in 2001, which is a
part of China ADR SRS. ADR reports are submitted
online via website, which was developed by National
Adverse Drug Reaction Monitoring Center of China. A
complete report consists of 69 variables including
patient demographics, medical history, details of all
prescribing drugs, all diagnosis and the ADR
information. There are 3000–4000 ADR reports
submitted quarterly in Shanghai now. Those reports
include ADR of both chemical medicine and Chinese
traditional medicine.
Finding new drug-ADR signals by manual review is
time-consuming and costly. Therefore it is necessary to
develop a computerized system which can implement
the work automatically. This can help to alleviate the
workload of expert panel. In the past, Cedric Bousquet
et al. have developed an automated signal generation
tool called PharmaMiner.5 In this paper, another signal
detection system with similar functions is presented,
which is an adjunct for current way of working in
Shanghai.

including instances of multiple drugs and multiple
reactions, the system broke them into single drug-ADR
combination for analysis firstly. As SRS was a passive
surveillance system, inaccurate information might
occur in the process of submission. Ideally, data were
expected to be relevant, precise and complete. In the
real world, we dealt with data that were transferred and
every data exchange potentially lead to loss of quality.6
Database of drug generic name and ADR standard
dictionary were set up initially for data cleaning and
coding.
WHO Adverse Reaction Terminology (WHO-ART),
Medical Dictionary for Regulatory Activities (MedDRA) and Coding Symbols for a Thesaurus of Adverse
Reaction Terms (COSTART) are the popular dictionaries used in pharmacovigilance. In this study, ADR
names were coded with WHO-ART using preferred
terms (PT).7 WHO-ART was developed by the WHO
and has been developed over more than 30 years to
serve as a basis for rational coding of adverse reaction
terms. Generic names for drugs were standardized
according to catalogue of generic names for common
prescription drugs, which was issued by Ministry of
Health of China in 2007. If the drug names in reports
were not in the catalogue, we would refer to the website
http://app1.sfda.gov.cn/datasearch/face3/dir.html or
Chinese Pharmacopoeia8 to get the generic names
for them.

METHODS

Data mining

Microsoft visual basic 6.0 was used as the programming language for this system. The flow chart of the
system is shown in Figure 1. Crude ADR reports
submitted to Shanghai ADR SRS from December 2003
to April 2007 were used as a material in this study to
test the feasibility and flexibility of this system.

Statistical data mining algorithms (DMAs) are being
heavily promoted as valuable adjuncts to conventional
pharmacovigilance methods. There are several drawbacks of SRS, including the usual limitations and
biases such as underreporting, lack of exposure
measurements, incomplete data, the considerable
human prejudgment involved and underutilization of
data.9 The development and use of data mining tools
for detecting new safety signals in post-marketing
spontaneous reporting databases is becoming prevalent
among regulators and drug monitoring centres as well
as pharmaceutical companies, with hopes for earlier

Data preprocessing and cleaning (coding)
To ensure data are clean and well described, it was
necessary to do data cleaning and data preprocessing
before data mining. Because there were many reports

Figure 1. Flow chart of the computerized system

Copyright # 2008 John Wiley & Sons, Ltd.

Pharmacoepidemiology and Drug Safety, 2009; 18: 154–158
DOI: 10.1002/pds

156

x. ye

ET AL.

The following points and interval estimates were
calculated for all combination: ROR-1.96 standard
error (SE), PRR-1.96 SE, ‘a’ and PRR with Yates
correction, IC-2 standard deviation (SD) are used as the
threshold for ROR, PRR, MHRA and BCPNN,
respectively. Eugene P. van Puijenbroek, et al.15 gave
a detailed computation formula for each method and
we referred to the formula in their work. A figure of
dynamic IC could be made after the computation of
each combination of drug-ADR association.

Table 1. A two-dimensional contingency table of an SRS database

Drug of interest
All other drugs
Total

ADR of interest

All other reactions

Total

a
c
aþc

b
d
bþd

aþb
cþd
aþbþcþd

and more efficient detection of new safety signals postmarketing.10
The majority of contemporary DMAs are variants of
disproportionality analysis based upon 2  2 contingency tables.11 Recently pharmacoepidemiologist and
statistician in China have paid much attention on
DMAs on pharmacovigilance. Chanjuan Li et al. made
a comparison of these algorithms using the Guangdong
province database.12 Table 1 shows a two-dimensional
contingency table.
Algorithms used in pharmacovigilance include
frequentist and Bayesian approaches. Reporting odds
ratio (ROR), proportional reporting ratio (PRR) and
measure used by the MHRA are the frequentist
approaches. These methods are clear, easy to understand and can lead to a more sensitive output than
Bayesian approaches. Bayesian confidence propagation neural network (BCPNN) by WHO and multiple
gamma-poisson shrinkage (MGPS) by FDA are
Bayesian approaches, which could get a more specific
result. BCPNN implements Bayesian statistics in a
neural network architecture, calculating an information
component (IC) for each drug-ADR combination in
the database. The IC is a logarithmic measure of
disproportionality.13,14 MGPS is not employed in this
system.

RESULTS
A total of 32746 crude ADR reports were downloaded
from December 2003 to April 2007 (41 months). The
numbers of ADR report acquired each month were
shown in Figure 2. It showed that 3000–4000 ADR
reports were submitted quarterly in Shanghai now.
After data preprocessing and cleaning, a total number
of 2147 drug generic names and 621 ADR names were
kept in the database.
A total of 1430, 1419, 868 and 997 possible drugADR signals were generated by ROR, PRR, BCPNN
and MHRA, respectively. This result demonstrated
that different statistical methods could produce very
different outcomes. The agreement was not good
between frequentist and Bayesian approaches, while it
was excellent between ROR and PRR. Bayesian
approaches detect fewer signals than frequentist
approaches due to their more specific characteristic.
These possible signals included captopril-coughing,
pyrazinamide-hepatitis, yuxingcao injection-cyanosis,
etc. There was no golden standard in algorithms in




$'5UHSRUWV





















































WLPH

Figure 2. ADR reports submitted every month from December 2003 to April 2007

Copyright # 2008 John Wiley & Sons, Ltd.

Pharmacoepidemiology and Drug Safety, 2009; 18: 154–158
DOI: 10.1002/pds

157

COMPUTERIZED SYSTEM FOR SIGNAL DETECTION

this study. The results indicate that this system could
help to download data automatically and detect a
possible drug-ADR signal intelligently. Most of the
operations are based on Microsoft Excel, which is easy
to operate while not powerful enough in large database.
As the number of reports submitted is increasing
rapidly, we plan to handle the database using Microsoft
Access in future.
A structured monitoring and evaluating system of
post-marketing drug use was built up by Adverse Drug
Reaction Monitoring Center of Shanghai in 2001.16
This system contains three databases: a population
health data base of middle aged and elderly persons;
hospital patient medical records; and a spontaneous
ADR reporting database. It focuses on utilization
patterns, beneficial effects, ADRs and economic value
of drugs. Though it is a multifunctional evaluation and
surveillance system for post-marketing surveillance, it
cannot detect a signal automatically from the SRS
database in Shanghai. Our newly developed system is
used as a special adjunct for signal detection in
Shanghai. It is a promising system for post-marketing
surveillance on both chemical medicine and Chinese
traditional medicine.
Reports of multiple drugs and multiple reactions
submitted are broken into single drug-ADR association. The present implementation does not take into
account drug-related issues such as drug–drug interaction, complex ADR syndromes and comparison of
ADR profiles in drug groups. In addition, the ‘signal’
detected by this system using incomplete information
may not be a real signal. For one thing, the ‘signal’
should be submitted to expert panel to make a decision.
For the other, some of the ‘signals’ have already been

Table 2. Association between ‘yuxingcao injection’ and hematuria
detected by algorithms
Algorithm
PRR
ROR
BCPNN
MHRA

Index

Value

PRR-1.96SE
ROR-1.96SE
IC-1.96SD
a
PRR
x2

1.526
1.525
0.136
5
3.724
7.107

signal detection, so we didn’t compare the sensitivity
and specificity of them.
‘Yuxingcao injection’, one of the Chinese traditional
medicine injections, which was distilled from herbal
‘Yuxingcao’, was suspended to be used and approved
on 1st June 2006 by State Food and Drug Administration (SFDA) for its ADR, such as cyanosis and
respiratory system disorders. We tried to apply this
system to check whether it could detect this signal.
Table 2 showed the association between ‘yuxingcao
injection’ and hematuria in April 2007 by different
algorithms.
Change in IC for the association of ‘yuxingcao
injection’ and hematuria was shown in Figure 3.The IC
was plotted on the y-axis and time (in months) on the xaxis. It indicated that BCPNN algorithm detected this
signal in July 2004, which was 2 years earlier than the
SFDA’s temporary withdrawal of this drug.
DISCUSSION
In this paper, we present a computerized system for
signal detection in SRS of Shanghai, China. Microsoft
visual basic 6.0 was used as programming language in




,&




 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 



 



 




WLPH PRQWK

Figure 3. Change in IC for the association between ‘yuxingcao injection’ and hematuria

Copyright # 2008 John Wiley & Sons, Ltd.

Pharmacoepidemiology and Drug Safety, 2009; 18: 154–158
DOI: 10.1002/pds

158

x. ye

listed in the labels, so they do not accord with the
definition of signal by the WHO.
ACKNOWLEDGEMENTS
This study was conducted under a grant from the National
Natural Science Foundation of China (30872186) and two
grants from the Ministry of Science and Technology
of China (2008ZX10002-018, 2008ZX09312-007). The
authors are indebted to the Adverse Drug Reaction Monitoring Center of Shanghai, who contributed the data.

REFERENCES
1. Wilson AM, Thabane L, Holbrook A. Application of data mining techniques in pharmacovigilance. Br J Clin Pharmacol 2003; 57: 127–134.
2. Hauben M, Reich L. Communication of findings in pharmacovigilance:
use of the term ‘signal’ and the need for precision in its use. Eur J Clin
Pharmacol 2005; 61: 479–480.
3. Hauben M, Horn S, Reich L. Potential use of data-mining algorithms
for the detection of ‘surprise’ adverse drug reactions. Drug Saf 2007;
30(2): 143–155.
4. Hauben M, Madigan D, Gerrits CM, Walsh L, Van Puijenbroek EP.
The role of data mining in pharmacovigilance. Expert Opin Drug Saf
2005; 4: 929–948.
5. Bousquet C, Henegar C, Lillo-Le Louet A, Degoulet P, Jaulent MC.
Implementation of automated signal generation in pharmacovigilance
using a knowledge-based approach. Int J Med Inform 2005; 74: 563–
571.

Copyright # 2008 John Wiley & Sons, Ltd.

ET AL.

6. Lindquist M. Use of triage strategies in the WHO signal-detection
process. Drug Saf 2007; 30(7): 635–637.
7. National Adverse Drug Reaction Monitoring Center. WHO Adverse
Reaction Terminology. China Medicine and Technology Press: Peking,
2003.
8. Committee of Chinese Pharmacopoeia. Chinese Pharmacopoeia.
Chemical Industry Press: Peking, 2005.
9. Hauben M, Xiaofeng Z. Quantitative methods in pharmacovigilance:
focus on signal detection. Drug saf 2003; 26(3): 159–186.
10. Stephenson WP, Hauben M. Data mining for signals in spontaneous
reporting databases: proceed with caution. Pharmacoepidemiol Drug
Saf 2007; 16: 359–365.
11. Hauben M, Patadia VK, Goldsmith D. What counts in data mining.
Drug saf 2006; 29(10): 827–832.
12. Li C, Xia J, Deng J, Jiang J. A comparison of measures of disproportionality for signal detection on adverse drug reaction spontaneous
reporting database of Guangdong province in China. Pharmacoepidemiol Drug Saf 2008; 17(6): 593–600.
13. Bate A, Lindquist M, Orre R, Edwards IR, Meyboom RH. Data-mining
analyses of pharmacovigilance signals in relation to relevant comparison drugs. Eur J Clin Pharmacol 2002; 58: 483–490.
14. Bate A, Lindquist M, Edwards IR, Olsson S, Orre R, Lansner A, et al.
A Bayesian neural network method for adverse drug reaction signal
generation. Eur J Clin Pharmacol 1998; 54: 315–321.
15. van Puijenbroek EP, Bate A, Leufkens HG, Lindquist M, Orre R,
Egberts AC. A comparison of measures of disproportionality for signal
detection in spontaneous reporting system for adverse drug reactions.
Pharmacoepidemiol Drug Saf 2002; 11: 3–10.
16. Du W, Levine M, Wang L, Zhang Y, Yi C, Wang H, et al.
Building a structured monitoring and evaluating system of postmarketing drug use in Shanghai. Can J Clin Pharmacol 2007;
14(1): e40–e44.

Pharmacoepidemiology and Drug Safety, 2009; 18: 154–158
DOI: 10.1002/pds

